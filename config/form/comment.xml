<?xml version="1.0" encoding="UTF-8"?>
<form>
	<attributes>
		<attribute name="action">?ext=comment&amp;controller=comment</attribute>
		<attribute name="name">comment</attribute>
	</attributes>
	<hiddenFields>
		<field name="id" />
		<field name="id_task" />
	</hiddenFields>
	<fieldsets>

		<fieldset name="main">
			<legend>Left form column</legend>
			<class>main</class>
			<elements>

				<field type="RTE" name="comment">
					<label>comment.edit.comment</label>
					<tinymce>
						<theme>simple</theme>
						<width>100%</width>
						<height>200px</height>
					</tinymce>
					<required />
				</field>

				<field type="selectgrouped" name="feedback">
					<label>comment.edit.feedback</label>
					<source type="function">
						<function>TodoyuCommentViewHelper::getFeedbackPersonsGroupedOptions</function>
						<lazyInit/>
					</source>
					<fieldClass>selectgrouped</fieldClass>
					<size>7</size>
					<multiple/>
					<restrict>
						<allow ext="comment" right="comment:requestFeedback" />
					</restrict>
				</field>

				<field type="checkbox" name="is_public">
					<label>comment.edit.is_public</label>
					<restrictInternal />
				</field>

				<field type="checkbox" name="sendasemail">
					<label>comment.edit.sendasemail</label>
					<onclick>Todoyu.Ext.comment.Edit.onClickSendAsEmail(this.id.split('-')[1])</onclick>
					<restrict>
						<allow ext="comment" right="comment:sendAsEmail" />
					</restrict>
				</field>

				<field type="select" name="emailreceivers">
					<label>comment.edit.sentEmailTo</label>
					<source type="function">
						<function>TodoyuCommentViewHelper::getEmailReceiverOptions</function>
						<lazyInit/>
					</source>
					<size>5</size>
					<multiple/>
					<style>display:none</style>
					<restrict>
						<allow ext="comment" right="comment:sendAsEmail" />
					</restrict>
				</field>

			</elements>
		</fieldset>

		<fieldset name="buttons">
			<legend>Actions</legend>
			<class>buttons</class>
			<elements>

				<field type="cancelButton" name="cancel">
					<onclick>Todoyu.Ext.comment.Edit.cancel(#id_task#, #id#)</onclick>
				</field>

				<field type="saveButton" name="save">
					<onclick>Todoyu.Ext.comment.Edit.save(this.form)</onclick>
				</field>

			</elements>
		</fieldset>

	</fieldsets>
</form>